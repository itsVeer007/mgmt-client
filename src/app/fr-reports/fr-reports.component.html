<!-- <app-loader *ngIf="showLoader"></app-loader> -->
<div class="container-fluid users" id="top">
    <!-- header -->
    <div class="d-flex justify-content-between">
        <div class="users-header">
            <p>List of Tickets - <span>{{ newTicketData?.length }}</span></p>
        </div>
        <div>
            <!-- <a class="pointer" (click)="show('ticket')"><img style="rotate: 45deg;" src="assets/icons/close_form.svg" alt="" width="70"></a> -->
            <button mat-flat-button color="primary" class="py-0" (click)="show('ticket')">Download Report</button>
        </div>
    </div>
    <!-- /header -->

    <!-- count -->
    <div class="row mb-2">
        <div class="col-lg-1 col-md-1 d-flex justify-content-start">
            <div class="vl-green"></div>
            <div class="mx-2">
                <div class="status">New</div>
                <div class="count">{{ ticketOpen?.length }}</div>
            </div>
        </div> <!-- <div class="col-lg-1 col-md-1 d-flex justify-content-start">
            <div class="vl-red"></div>
            <div class="mx-2">
            <div class="status">Analysis</div>
            <div class="count">{{ ticketOpen?.length }}</div>
        </div>
        </div> -->
        <div class="col-lg-1 col-md-1 d-flex justify-content-start">
            <div class="vl-yellow"></div>
            <div class="mx-2">
                <div class="status">InProgress</div>
                <div class="count">{{ ticketProgress?.length }}</div>
            </div>
        </div>
        <div class="col-lg-1 col-md-1 d-flex justify-content-start">
            <div class="vl-orange"></div>
            <div class="mx-2">
                <div class="status">Rejected</div>
                <div class="count">{{ ticketRejected?.length }}</div>
            </div>
        </div>
        <div class="col-lg-1 col-md-1 d-flex justify-content-start">
            <div class="vl-red"></div>
            <div class="mx-2">
                <div class="status">Closed</div>
                <div class="count">{{ ticketClose?.length }}</div>
            </div>
        </div>
    </div>
    <!-- /count -->

    <!-- table starts -->
    <div class="table-resp">
        <table class="table table-hover" id="mytable">
            <thead>
                <tr class="form1">
                    <!-- <th>
                <input type="checkbox" class="form-check-input" [(ngModel)]="selectedAll" (change)="selectAll()"
                id="allcheck" style="
                background-color: #00000000;
                border-color: #fff;
                margin-left: 10px;
                " />
            </th> -->

                    <th>
                        <span>id</span>
                        <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <th>
                        <span>siteName</span>
                        <img (click)="sort('siteId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <th>
                        <span>ticketType</span>
                        <img (click)="sort('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <th>
                        <span>ticketAttendedBy</span>
                        <img (click)="sort('priorityId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <th>
                        <span>ticketStatus</span>
                        <img (click)="sort('requestedBy')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <th>
                        <span>ticketClosedDate</span>
                        <img (click)="sort('assignedTo')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <th>
                        <span>ticketAttendedDate</span>
                        <img (click)="sort('sourceOfRequestId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                    </th>

                    <!-- <th class="text-center">Actions</th> -->
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let cust of newTicketData | search : searchText; let i = index"
                    (dblclick)="openViewPopup(cust)">
                    <!-- <td>
            <input type="checkbox" name="foo" class="form-check-input" [(ngModel)]="cust.selected" (change)="
                checkIfAllSelected();
                deleteMultiRecords(cust, i, $event);
                ViewByCheckbox(cust, i, $event);
                EditByCheckbox(cust, i, $event)
                " id="singleCheck" />
            </td> -->
                    <td>
                        <p>{{ cust.ticketId }}</p>
                    </td>
                    <td>
                        <p>{{ cust.siteName }}</p>
                    </td>

                    <td>
                        <p>{{ cust.ticketType }}</p>
                    </td>

                    <td>
                        <p>{{ cust.ticketAttendedBy }}</p>
                    </td>

                    <td>
                        <p>{{ cust.ticketStatus }}</p>
                    </td>

                    <td>
                        <p>{{ cust.ticketClosedDate | date: 'dd-MM-yyyy' }}</p>
                    </td>

                    <td>
                        <p>{{ cust.ticketAttendedDate | date: 'dd-MM-yyyy' }}</p>
                    </td>




                </tr>
            </tbody>
        </table>
    </div>

    <div class="d-flex align-items-center justify-content-center" style="height: 50vh;"
        *ngIf="newTicketData.length == 0 && !showLoader">
        <h1 class="text-secondary">No Data</h1>
    </div>

    <!-- Loader -->
    <div>
        <app-loader *ngIf="showLoader" class="d-flex justify-content-center align-items-center"
            style="height: 50vh;"></app-loader>
    </div>
    <!-- /Loader -->
</div>
<!-- /table -->