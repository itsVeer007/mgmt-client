<div class="container-fluid users" id="top">
  <!-- header -->
  <div class="d-flex justify-content-between align-items-center mb-2">
    <div class="users-header">
      <p class="m-0">Total Tasks - <span>{{frTickets?.length}}</span></p>
    </div>

    <div class="row">
      <div class="col-lg-2 mx-2">
        <button class="create-btn" (click)="openStatusItems(1565, null)">Instock</button>
      </div>
      <div class="col-lg-2 mx-2">
        <button class="create-btn" (click)="openStatusItems(1565, 1)">Requested</button>
      </div>

      <div class="col-lg-2 mx-2">
        <button class="create-btn" (click)="openStatusItems(1565, 2)">Dispatched</button>
      </div>

      <div class="col-lg-2 mx-2">
        <button class="create-btn" (click)="openStatusItems(1565, 5)">Removed</button>
      </div>

      <!-- <div class="col-lg-2 mx-2">
        <button class="create-btn" (click)="openDc()">Dc</button>
      </div> -->
    </div>
      
  </div>
  
  <!-- /header -->

    <!-- form -->
    <div class="search-form">
      <div class="row col-lg-10 col-md-10">
        <div class="col-lg-3 col-md-3 col-sm-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Site Name</mat-label>
            <mat-select [(ngModel)]="siteNg">
              <mat-option value="All" (click)="filterSites('All')">All</mat-option>
              <mat-option *ngFor="let data of siteIds" (click)="filterSites(data.sitename)" [value]="data.sitename">{{ data.siteid }} - {{ data.siteShortName }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-lg-3 col-md-3 col-sm-12">
          <mat-form-field class="example-form-field" appearance="outline" class="w-100">
            <mat-label>Search</mat-label>
            <input matInput type="text"  [(ngModel)]="searchText">
            <button matSuffix mat-icon-button>
              <mat-icon>search</mat-icon>
            </button>
          </mat-form-field>
        </div>
      </div>

      <div class="col-lg-2 mx-2 mb-3">
        <button class="create-btn" (click)="openDc()">Dc</button>
      </div>
    </div>
    <!-- /form -->

  <!-- table -->
  <div class="table-resp">
    <table class="table table-hover" id="mytable">
      <thead>
        <tr class="form1">
          <th>
            <p class="d-inline-flex">
              <span>id</span>
              <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </p>
            <!-- <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
          </th>

          <th>
            <span>Site entry</span>
          </th>

          <th>
            <span>View tasks</span>
          </th>

          <th>
            <p class="d-inline-flex">
              <span>Ticket type</span>
              <img (click)="sort('ticketType')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </p>
          </th>

          <!-- <th>
            <p class="d-inline-flex">
              <span>Site id</span>
              <img (click)="sort('siteId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </p>
          </th> -->

          <th>
            <p class="d-inline-flex">
              <span>Site name</span>
              <img (click)="sort('siteName')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </p>
          </th>

          <th>
            <span>Indent add</span>
          </th>

          <th>
            <span>Indent view</span>
          </th>

          <th>
            <span></span>
            <p class="d-inline-flex">
              <span>Reason description</span>
              <img (click)="sort('reasonDescription')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </p>
          </th>

          <th>
            <p class="d-inline-flex">
              <span>Created time</span>
              <img (click)="sort('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </p>
          </th>

          <th>
            <p class="d-inline-flex">
              <span>Status</span>
              <!-- <img (click)="sort('siteName')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
            </p>
          </th>

          <th>
            <span>Site exit</span>
          </th>
        </tr>
      </thead>

      <tbody *ngIf="!showLoader">
        <tr *ngFor="let cust of newFrTickets; let i = index">
          <td>
            <p>{{ i+1 }}</p>
          </td>
          <td>
            <p class="pointer text-primary" (click)="openSitesDialog(); fieldVisitEntry(cust)">Enter</p>
          </td>
          <td>
            <p class="pointer text-primary" (click)="openTasksDialog(cust)">View</p>
          </td>
          <td>
            <p>{{ cust.ticketType }}</p>
          </td>

          <!-- <td>
            <p>{{ cust.siteId }}</p>
          </td> -->

          <td>
            <p>{{ cust.siteName }}</p>
          </td>

          <td>
            <a class="pointer" (click)="show('indent'); ticketIdToFr(cust)">
              <img src="assets/icons/add.svg" width="40">
            </a>
          </td>

          <td>
            <p class="text-primary pointer" (click)="openDetailsDialog(cust)">View</p>
          </td>

          <td>
            <p>{{ cust.reasonDescription }}</p>
          </td>

          <td>
            <p>{{ cust.createdTime }}</p>
          </td>

          <td>
            <p [style.color]="cust.status == 'Open' ? 'green' : cust.status == 'Indent Requested' ? 'orange' : cust.status == 'In Progress' ? 'violet' : cust.status == 'Indent Delivered' ? 'purple' : 'blue' ">{{ cust.status }}</p>
          </td>

          <td>
            <p class="pointer text-primary" (click)="openVisitExit()">Exit</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- error message -->
  <div class="d-flex align-items-center justify-content-center" style="height: 50vh;" *ngIf="errMsg">
    <h1 class="text-secondary">{{ errMsg }}</h1>
  </div>

  <!-- loader -->
  <div *ngIf="showLoader">
    <app-loader class="d-flex justify-content-center align-items-center" style="height: 50vh;"></app-loader>
  </div>
</div>


<ng-template #currentTasksDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">current tasks</p>
  </div>

  <mat-dialog-content>
    <div class="table-resp">
      <table class="table table-hover" id="mytable">
        <thead>
          <tr class="form1">
            <th>
              <p class="d-inline-flex">
                <span>Id</span>
                <img (click)="sort2('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
              <!-- <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
            </th>

            <th>

              <p class="d-inline-flex">
                <span>Category</span>
                <img (click)="sort2('category')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Sub category</span>
                <img (click)="sort2('subCategory')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <!-- <th>
              <p class="d-inline-flex">
                <span>Reason</span>
                <img (click)="sort('reason')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th> -->

            <th class="text-center">
              <span>Status</span>
            </th>

            <th *ngIf="ticketType == 2">
              <span>Install</span>
            </th>

            <th *ngIf="ticketType == 1">
              <span>Replace</span>
            </th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let cust of tasks">
            <td>
              <p>{{ cust.id }}</p>
            </td>
            <td>
              <p>{{ cust.category }}</p>
            </td>

            <td>
              <p>{{ cust.subCategory }}</p>
            </td>

            <!-- <td>
              <p>{{ cust.reason }}</p>
            </td> -->

            <td>
              <!-- <a class="mx-1 pointer" (click)="logTaskStatus(cust, 2)">
                <img src="assets/icons/forward.svg" width="20">
              </a> -->

              <a class="mx-1 pointer" (click)="openCnfrmStatusDialogt(cust, 'pause')">
                <!-- <img src="assets/icons/pause.svg" width="20"> -->
                Pause
              </a>

              <a class="mx-1 pointer" (click)="openCnfrmStatusDialogt(cust, 'shedule')">
                <!-- <img src="assets/icons/scheduled.svg" width="20"> -->
                Schedule
              </a>

              <a class="mx-1 pointer" (click)="openCnfrmStatusDialogt(cust, 'close')">
                <!-- <img src="assets/icons/close_black.svg" width="20"> -->
                Close
              </a>
            </td>

            <td *ngIf="ticketType == 2">
              <a class="mx-1 pointer" (click)="openCreateOrder(cust)">
                <img src="assets/icons/add.svg" width="35">
              </a>
            </td>

            <td *ngIf="ticketType == 1">
              <a class="mx-1 pointer" (click)="openReplaceComponent(cust)">
                <img src="assets/icons/add.svg" width="35">
              </a>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="d-flex align-items-center justify-content-center" style="height: 20vh;" *ngIf="tasks.length == 0">
        <h1 class="text-secondary">No Tasks</h1>
      </div>
    </div>
  </mat-dialog-content>

  <div class="d-flex justify-content-end" mat-dialog-actions>
    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
  </div>
</ng-template>

<ng-template #cnfrmStatusDialog>
  <div *ngIf="currentStatusType == 'pause'">
    <div style="background-color: #084982;">
      <p class="dialog-title">pause status</p>
    </div>

    <mat-dialog-content>
      <p>Are you want to pause the status <span style="font-weight: 600;">{{currentStatusItem?.subCategory}}</span></p>
    </mat-dialog-content>

    <div class="d-flex align-items-center justify-content-end">
      <div mat-dialog-actions class="me-2">
        <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
      </div>
      <div mat-dialog-actions>
        <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="logTaskStatus(currentStatusItem, 3)">Submit</button>
      </div>
    </div>
  </div>

  <div *ngIf="currentStatusType == 'shedule'">
    <div style="background-color: #084982;">
      <p class="dialog-title">shedule status</p>
    </div>

    <mat-dialog-content>
      <p>Are you want to shedule the status <span style="font-weight: 600;">{{currentStatusItem?.subCategory}}</span></p>
    </mat-dialog-content>

    <div class="d-flex align-items-center justify-content-end">
      <div mat-dialog-actions class="me-2">
        <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
      </div>
      <div mat-dialog-actions>
        <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="logTaskStatus(currentStatusItem, 4)">Submit</button>
      </div>
    </div>
  </div>

  <div *ngIf="currentStatusType == 'close'">
    <div style="background-color: #084982;">
      <p class="dialog-title">close status</p>
    </div>

    <mat-dialog-content>
      <p>Are you want to close the status <span style="font-weight: 600;">{{currentStatusItem?.subCategory}}</span></p>
    </mat-dialog-content>

    <div class="d-flex align-items-center justify-content-end">
      <div mat-dialog-actions class="me-2">
        <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
      </div>
      <div mat-dialog-actions>
        <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="logTaskStatus(currentStatusItem, 5)">Submit</button>
      </div>
    </div>
  </div>

</ng-template>

<ng-template #ticketTaskDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">view tasks</p>
  </div>

  <mat-dialog-content>
    <div class="table-res">
      <table class="table" id="mytable">
        <thead>
          <tr class="task-table">
            <th>
              <p class="d-inline-flex">
                <span>Task id</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Category</span>
                <img (click)="sort('categoryId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>SubCategory</span>
                <img (click)="sort('subCategoryId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Reason</span>
                <img (click)="sort('reasonId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Created time</span>
                <img (click)="sort('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Priority</span>
                <img (click)="sort('priorityId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let cust of ticketTasks; let i = index">
            <td>
              <p>{{ cust.id }}</p>
            </td>

            <td>
              <p>{{ cust.categoryId == 1 ? 'Camera' : cust.categoryId == 2 ? 'Assets' : '' }}</p>
            </td>

            <td>
              <p>{{ cust.subCategoryId == 1 ? 'Site Down' : cust.subCategoryId == 2 ? 'Footage Required' : cust.subCategoryId == 3 ? 'Blank Screen' : ''  }}</p>
            </td>

            <td>
              <p>{{ cust.reasonId }}</p>
            </td>

            <td>
              <p>{{ cust.createdTime }}</p>
            </td>

            <td>
              <p>{{ cust.priorityId == 1 ? 'Low' : cust.priorityId == 2 ? 'Medium' :cust.priorityId == 3 ? 'High' : '' }}</p>
            </td>

            <!-- <td>
              <p>{{ cust.statusId == 1 ? 'Open' : cust.statusId == 2 ? 'In-Progress' : cust.statusId == 3 ? 'Closed' : cust.statusId == 4 ? 'Rejected' : '' }}</p>
            </td> -->
          </tr>
        </tbody>
      </table>
    </div>
  </mat-dialog-content>

  <div class="d-flex justify-content-end" mat-dialog-actions>
    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
  </div>
</ng-template>

<ng-template #viewSitesDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">view site</p>
  </div>

  <mat-dialog-content>
    <div class="row">
      <div class="col-lg-12 col-md-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Sites</mat-label>
          <mat-select [(ngModel)]="assignedObj.statusId">
            <mat-option *ngFor="let item of sites" [value]="item.siteId">{{item.siteName}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </mat-dialog-content>

  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="fieldVisitEntry(assignedObj.statusId)">Entry</button>
    </div>
  </div>
</ng-template>

<ng-template #exitDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">exit site</p>
  </div>

  <mat-dialog-content>
    <div class="row">
      <div class="col-lg-12 col-md-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>travelAllowance</mat-label>
          <input matInput [(ngModel)]="fieldExitBody.travelAllowance">
        </mat-form-field>
      </div>

      <div class="col-lg-12 col-md-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>foodAllowance</mat-label>
          <input matInput [(ngModel)]="fieldExitBody.foodAllowance">
        </mat-form-field>
      </div>

      <div class="col-lg-12 col-md-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>otherAllowance</mat-label>
          <input matInput [(ngModel)]="fieldExitBody.otherAllowance">
        </mat-form-field>
      </div>

      <div class="col-lg-12 col-md-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>remarks</mat-label>
          <input matInput [(ngModel)]="fieldExitBody.remarks">
        </mat-form-field>
      </div>
    </div>
  </mat-dialog-content>

  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="fieldVisitExit()">Submit</button>
    </div>
  </div>
</ng-template>

<ng-template #viewIndentDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">view indent</p>
  </div>

  <mat-dialog-content>
    <div class="table-res">
      <table class="table" id="mytable">
        <thead>
          <tr class="task-table">
            <th>
              <p class="d-inline-flex">
                <span>No</span>
                <img (click)="sort1('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Name</span>
                <img (click)="sort1('itemCode')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Serial no</span>
                <img (click)="sort1('serialNo')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Created time</span>
                <img (click)="sort1('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Modified time</span>
                <img (click)="sort1('modifiedTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Status</span>
                <img (click)="sort1('statusId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let inven of indentItems; let i = index">
            <td>
              <p>{{ i+1 }}</p>
            </td>

            <td>
              <p>{{ inven.name }}</p>
            </td>

            <td>
              <p>{{ inven.serialNo }}</p>
            </td>

            <td>
              <p>{{ inven.createdTime }}</p>
            </td>

            <td>
              <p>{{ inven.modifiedTime }}</p>
            </td>

            <td>
              <p (click)="openEditStatus(inven)">
                {{ inven.statusId == 1 ? "Requested" : inven.statusId == 2 ? "Dispatched" : inven.statusId == 3 ? "Received" : inven.statusId == 4 ? "Installed" : inven.statusId == 5 ? "Returned" : '' }}
              </p>

              <ng-template #editStatusDialog>
                <div style="background-color: #084982;">
                  <p class="dialog-title">view status</p>
                </div>

                <mat-dialog-content>
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Edit Status</mat-label>
                    <mat-select [(ngModel)]="statusObj.statusId">
                      <mat-option *ngFor="let item of indentStatus" [value]="item.keyId">{{ item.value }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </mat-dialog-content>

                <div class="d-flex align-items-center justify-content-end">
                  <div mat-dialog-actions class="me-2">
                    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
                  </div>
                  <div mat-dialog-actions>
                    <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="updateInventoryStatus()">Update</button>
                  </div>
                </div>
              </ng-template>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="d-flex align-items-center justify-content-center" style="height: 20vh;" *ngIf="indentItems.length == 0">
      <h1 class="text-secondary">No Data</h1>
    </div>
  </mat-dialog-content>

  <div class="d-flex justify-content-end" mat-dialog-actions>
    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
  </div>
</ng-template>

<ng-template #replaceDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">replace</p>
  </div>

  <mat-dialog-content>
    <div class="table-res">
      <table class="table" id="mytable">
        <thead>
          <tr class="task-table">
            <th>
              <p class="d-inline-flex">
                <span>Sl No</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Name</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Serial no</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Created time</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Modified time</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Install</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let inven of indentItems; let i = index">
            <td>
              <p>{{ i+1 }}</p>
            </td>

            <td>
              <p>{{ inven.name }}</p>
            </td>

            <td>
              <p>{{ inven.serialNo }}</p>
            </td>

            <td>
              <p>{{ inven.createdTime | date: 'mediumDate' }}</p>
            </td>

            <td>
              <p>{{ inven.modifiedTime }}</p>
            </td>

            <td>
              <!-- <span class="d-inline-flex">
                <p>
                  {{ inven.statusId == 1 ? "Requested" : inven.statusId == 2 ? "Dispatched" : inven.statusId == 3 ? "Received" : inven.statusId == 4 ? "Installed" : inven.statusId == 5 ? "Returned" : '' }}
                </p>

                <a (click)="openReplaceComponent(inven)" class="ms-2 pointer">
                  <img src="assets/icons/edit.svg"  width="13">
                </a>
              </span> -->

              <p (click)="changeToInstall(inven)">
                <span *ngIf="statusMsg == ''">To be installed</span>
                <span *ngIf="statusMsg != ''">{{statusMsg}}</span>
              </p>

              <!-- <ng-template #editStatusDialog>
                <div style="background-color: #084982;">
                  <p class="dialog-title">view status</p>
                </div>

                <mat-dialog-content>
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Edit Status</mat-label>
                    <mat-select [(ngModel)]="statusObj.statusId">
                      <mat-option *ngFor="let item of indentStatus" [value]="item.keyId">{{ item.value }}</mat-option>
                    </mat-select>
                  </mat-form-field>
                </mat-dialog-content>

                <div class="d-flex align-items-center justify-content-end">
                  <div mat-dialog-actions class="me-2">
                    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
                  </div>
                  <div mat-dialog-actions>
                    <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="updateInventoryStatus()">Update</button>
                  </div>
                </div>
              </ng-template> -->
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </mat-dialog-content>

  <div class="d-flex justify-content-end" mat-dialog-actions>
    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
  </div>
</ng-template>

<ng-template #replaceStatusDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">modify status</p>
  </div>


  <mat-dialog-content>
    <div class="row">
      <div class="col-lg-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Old inventoryid</mat-label>
          <mat-select [(ngModel)]="body.oldInventoryId">
            <mat-option *ngFor="let item of inventoryId" [value]="item.inventorySlNo">{{ item.inventorySlNo }} - {{ item.name }} </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-lg-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>New inventoryid</mat-label>
          <mat-select [(ngModel)]="body.newInventoryId">
            <mat-option *ngFor="let val of inventoryId2" [value]="val.inventoryId">{{ val.inventoryId }} - {{ val.name }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-lg-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Edit Status</mat-label>
          <mat-select [(ngModel)]="statusObj.statusId">
            <mat-option *ngFor="let item of indentStatus" [value]="item.keyId">{{ item.value }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-lg-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>FR inventory</mat-label>
          <mat-select [(ngModel)]="body.newInventoryId" (focus)="latestFun(1565, null)">
            <mat-option *ngFor="let val of statusItems" [value]="val.invNo">{{ val.invNo }} - {{ val.name }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- <div class="col-lg-6">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Remarks</mat-label>
          <input matInput>
        </mat-form-field>
      </div> -->
    </div>
  </mat-dialog-content>

  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="replaceComponent()">Update</button>
    </div>
  </div>
</ng-template>

<ng-template #statusItemsDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">view</p>
  </div>

  <mat-dialog-content>
    <div class="table-res">
      <table class="table" id="mytable">
        <thead>
          <tr class="task-table">
            <th>
              <input type="checkbox" class="form-check-input" [(ngModel)]="selectedAll" (change)="selectAll()"
                id="allcheck" style="
                  background-color: #00000000;
                  border-color: #fff;
                  margin-left: 10px;
                " />
            </th>
            <th>Item Code</th>
            <th>Name</th>
            <th>Serial no</th>
            <th>Quantity</th>
            <!-- <th>Data</th> -->
            <!-- <th *ngIf="currentStatusItem == 5">status</th> -->
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let task of latestValue; let i = index">

            <td>
              <input type="checkbox" name="foo" class="form-check-input" [(ngModel)]="task.selected" (change)="checkIfAllSelected(task, $event);" id="singleCheck" />
            </td>
            <td>
              <p>{{ task.itemCode }}</p>
            </td>

            <td>
              <p>{{ task.name }}</p>
            </td>

            <td>
              <p>{{ task.invNo }}</p>
            </td>

            <td>
              <p>{{ task.count ? task.count : 1 }}</p>
            </td>
            

            <!-- <td>
              <p class="pointer text-primary" matTooltip="dispatch to inventory" (click)="open(task)">Dispatch</p>
            </td> -->

            <!-- <td>
              <p>{{ task.siteName }}</p>
            </td> -->
            <!-- <td *ngIf="currentStatusItem == 5">
              <p (click)="openEditStatus(task)">
              {{
                task.statusId  == 1 ? 'Requested'
                : task.statusId == 2 ? 'Dispatched'
                : task.statusId == 3 ? 'Received'
                : task.statusId == 4 ? 'Installed'
                : task.statusId == 5 ? 'Returned'
                : ''
              }} </p>
            </td> -->

            <!-- <ng-template #editStatusDialog>
              <div style="background-color: #084982;">
                <p class="dialog-title">view status</p>
              </div>

              <mat-dialog-content>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Edit Status</mat-label>
                  <mat-select [(ngModel)]="statusObj.statusId">
                    <mat-option *ngFor="let item of inventoryStatus" [value]="item.keyId">{{ item.value }}</mat-option>
                  </mat-select>
                </mat-form-field>
              </mat-dialog-content>

              <div class="d-flex align-items-center justify-content-end">
                <div mat-dialog-actions class="me-2">
                  <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
                </div>
                <div mat-dialog-actions>
                  <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="updateInventoryStatus()">Update</button>
                </div>
              </div>
            </ng-template> -->

            <ng-template #viewInventoryToDispatch>
              <div style="background-color: #084982; color: aliceblue;">
                <p class="dialog-title">view</p>
              </div>
              <mat-dialog-content>
                <div class="row">
                  <div class="col-lg-12">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>select Dc No</mat-label>
                      <mat-select [(ngModel)]="cost">
                        <mat-option value="A1">A1</mat-option>
                        <!-- <mat-option [value]="cost">A2</mat-option> -->
                      </mat-select>
                    </mat-form-field>
                    <!-- <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Enter Dc No</mat-label>
                      <input matInput [(ngModel)]="cost">
                    </mat-form-field> -->
                  </div>
                </div>
              </mat-dialog-content>
              <div class="d-flex align-items-center justify-content-end">
                <div mat-dialog-actions class="me-2">
                  <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
                </div>
                <div mat-dialog-actions>
                  <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="updateDispatchToInventory()">Update</button>
                </div>
              </div>
            </ng-template>
            <!-- <div mat-dialog-actions>
              <button mat-raised-button color="warn" matDialogClose>close</button>
            </div> -->
          </tr>
        </tbody>
      </table>
    </div>
  </mat-dialog-content>
  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="open('')">Dispatch</button>
    </div>
  </div>
</ng-template>

<ng-template #viewDcDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">VIEW DC</p>
  </div>

  <mat-dialog-content>
    <div class="table-res">
      <table class="table" id="mytable">
        <thead>
          <tr class="task-table">
            <th>
              <p>dcNumber</p>
            </th>
            <th>
              <p class="d-inline-flex">
                <span>receiptNo</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>cost</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>dispatchedDate</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Details</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>Details</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let item of items; let i = index">
            <td>
              <p>{{item.dcNumber}}</p>
            </td>
            <td>
              <p>{{ item.receiptNo }}</p>
            </td>

            <td>
              <p>{{ item.cost}}</p>
            </td>

            <td>
              <p>{{ item.dispatchedDate  | date:'mediumDate'}}</p>
            </td>

            <td class="pointer text-primary" (click)="dcItems()">
              <p>View</p>
            </td>
            <td class="pointer text-primary"(click)="openPopUp(item)">
              <p>Update Dc</p>
            </td>

          </tr>
        </tbody>
      </table>
    </div>
  </mat-dialog-content>

  <div class="d-flex justify-content-end" mat-dialog-actions>
    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
  </div>
</ng-template>

<ng-template #dcStatusDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">VIEW DC</p>
  </div>

  <mat-dialog-content>
    <div class="table-res">
      <table class="table" id="mytable">
        <thead>
          <tr class="task-table">
            <th>
              <p>name</p>
            </th>
            <th>
              <p class="d-inline-flex">
                <span>SlNo</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>

            <th>
              <p class="d-inline-flex">
                <span>itemCode</span>
                <!-- <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
              </p>
            </th>

            <!-- <th>
              <p class="d-inline-flex">
                <span>dispatchedDate</span>
                <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </p>
            </th> -->

            <!-- <th>
              <p class="d-inline-flex">
                <span>Details</span>
              </p>
            </th> -->
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let item of Items; let i = index">
            <td>
              <p>{{item.name}}</p>
            </td>
            <td>
              <p>{{ item.oldSlNo }}</p>
            </td>

            <td>
              <p>{{ item.itemCode}}</p>
            </td>

            <!-- <td>
              <p>{{ item.dispatchedDate  | date:'mediumDate'}}</p>
            </td> -->

            <!-- <td class="pointer text-primary" (click)="openView()">
              <p>View</p>
            </td> -->

          </tr>
        </tbody>
      </table>
    </div>
  </mat-dialog-content>

  <div class="d-flex justify-content-end" mat-dialog-actions>
    <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
  </div>
</ng-template>

<ng-template #dcFinalDialog>
  <div style="background-color: #084982;">
    <p class="dialog-title">UPDATE DC</p>
  </div>
  <mat-dialog-content>
  <div class="row">
    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Receipt No</mat-label>
        <input matInput [(ngModel)]="data.receiptNo">
      </mat-form-field>
    </div>
    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Cost</mat-label>
        <input matInput type="number" [(ngModel)]="data.cost">
      </mat-form-field>
    </div>
  </div>
  </mat-dialog-content>
  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="updateDC()">Update</button>
    </div>
  </div>
</ng-template>

<div style="position: fixed; top: 70px; right: 0; z-index: 99; width: 100%;" *ngIf="showIndent">
  <app-add-new-indent (newItemEvent)="closenow('indent')"></app-add-new-indent>
</div>
