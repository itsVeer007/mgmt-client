<!-- <app-loader *ngIf="showLoader"></app-loader> -->
<div class="container-fluid" id="top">
    <!-- header -->
    <div class="d-flex justify-content-start">
        <div class="users-header mt-2">
            <p>Total Devices - <span>{{total?.total_counts ? total?.total_counts : 0}}</span></p>
        </div>
        <!-- <div>
          <button class="create-btn" (click)="show('wifi')">Create User</button>
        </div> -->
    </div>

        <!-- count -->
    <div class="row mb-2 mt-2">
        <div class="col-lg-1 col-md-1 d-flex justify-content-start">
        <div class="vl-green"></div>
            <div class="mx-2">
        <div class="status">Active - </div>
        <div class="count">{{ total?.active ? total?.active : 0 }}</div>
        </div>
        </div>
    <!-- <div class="col-lg-1 col-md-1 d-flex justify-content-start">
        <div class="vl-yellow"></div>
        <div class="mx-2">
        <div class="status">InActive - </div>
        <div class="count">{{ total?.inactive ? total?.inactive : 0 }}</div>
        </div>
    </div>
    <div class="col-lg-1 col-md-1 d-flex justify-content-start">
    <div class="vl-red"></div>
    <div class="mx-2">
        <div class="status">LastMonth Count - </div>
        <div class="count">{{ total?.previous_month_users_count ? total?.previous_month_users_count : 0}}</div>
    </div>
    </div> -->
</div>
<!-- /count -->
<!-- 
    <div class="row mt-2">
        <div class="col-lg-2 col-md-2">
        <mat-form-field appearance="outline" class="w-100">
            <mat-label>Site Name</mat-label>
            <mat-select [(ngModel)]="filterDataObject.siteId">
              <mat-option value="All" (click)="filterWifiData()">All</mat-option>
                <mat-option *ngFor="let item of newTableData | search: siteSearch" [value]="item.siteid"  (click)="filterWifiData()" >{{ item.siteid }} - {{ item.sitename }}</mat-option>
            </mat-select>
        </mat-form-field>
        </div>

        <div class="col-lg-2 col-md-2">
          <mat-form-field appearance="outline" class="w-100">
              <mat-label>Device Name</mat-label>
              <mat-select [(ngModel)]="filterDataObject.deviceId" (selectionChange)="filterWifiData()">
                  <mat-option value="RSMGLIN9902DW1">RSMGLIN9902DW1</mat-option>
                  <mat-option value="Dv1">Dv1</mat-option>
                  <mat-option value="Dv2">Dv2</mat-option>
              </mat-select>
          </mat-form-field>
          </div>

        <div class="col-lg-3 from-date">
        <mat-form-field appearance="outline" class="w-100">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [rangePicker]="rangePicker">
            <input matStartDate placeholder="Created from" [(ngModel)]="filterDataObject.startDate">
            <input matEndDate placeholder="Created to" [(ngModel)]="filterDataObject.endDate">
            </mat-date-range-input>
            <mat-datepicker-toggle matIconSuffix [for]="rangePicker"></mat-datepicker-toggle>

            <mat-date-range-picker #rangePicker>
            <mat-date-range-picker-actions>
                <button mat-button matDateRangePickerCancel>Cancel</button>
                <button mat-raised-button color="primary" matDateRangePickerApply (click)="filterWifiData()">Apply</button>
            </mat-date-range-picker-actions>
            </mat-date-range-picker>
        </mat-form-field>
        </div>

        <div class="col-md-2 mt-1">
          <button class="create-btn" (click)="show('ticket')">Submit</button>
        </div>
    </div> -->

    <div class="table-resp">
        <table class="table table-hover" id="mytable" #table>
        <thead>
            <tr class="form1">
                <th>
                    <span>Id</span>
                    <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
                </th>
                <th>
                  <span>Device ID</span>
                  <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
              </th>
            <th>
                <span>Active Devices</span>
                <img (click)="sort('ticketId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </th>

            <th>
                <span>InActive Devices</span>
                <img (click)="sort('siteId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </th>
            <th>
                <span>Total Count</span>
                <img (click)="sort('siteId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </th>

            <th>
                <span>Time Spent</span>
                <img (click)="sort('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
            </th>
            
            <th>
              <span>hour</span>
              <img (click)="sort('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
          </th>
            <!-- <th>
              <span>PeakHour</span>
              <img (click)="sort('createdTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
          </th> -->
          <th>
          <span>Details</span>
          </th>
        </tr>
        </thead>

        <tbody>
            <tr *ngFor="let cust of newWifiData | search : searchText; let i = index">
                <td>
                    <p>{{i+1}}</p>
                </td>
                <td>
                  <p>{{'RSWIN10460001'}}</p>
              </td>
                <td>
                    <p>{{ cust.active }}</p>
                </td>
                <td>
                    <p>{{ cust.inactive }}</p>
                </td>

                <td>
                    <p>{{ cust.total }}</p>
                </td>

                <td>
                    <p>{{ cust.timeSpent }}</p>
                </td>
                
                <td>
                  <p>{{ cust.hour }}</p>
              </td>
                <!-- <td>
                  <p>{{ cust.peak_hour }}</p>
              </td> -->
              <td>
                <a class="mx-1 pointer" (click)="show('wifi')" matTooltip="View">
                  view
                </a>
              </td>
            </tr>
        </tbody>
        </table>

        <!-- error info -->
        <div class="err-info" style="height: 50vh;" *ngIf="newWifiData?.length == 0 && !showLoader">
          <h1 class="text-secondary">No Devices</h1>
        </div>

        <!-- loader -->
        <div *ngIf="showLoader" class="d-flex justify-content-center align-items-center" style="height: 50vh;">
          <app-loader></app-loader>
        </div>
    </div>
  </div>

  <ng-template #usedItemsDialog>
    <div style="background-color: #084982;">
      <p class="dialog-title">used items</p>
    </div>

    <div class="dialog-content">
      <div class="table-res">
        <table class="table" id="mytable">
          <thead>
            <tr class="task-table">
              <th>
                <p class="d-inline-flex">
                  <span>IP Address</span>
                  <!-- <img (click)="sort1('inventoryId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
                </p>
              </th>

              <th>
                <p class="d-inline-flex">
                  <span>MacAddress</span>
                  <!-- <img (click)="sort1('itemCode')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
                </p>
              </th>

              <th>
                <p class="d-inline-flex">
                  <span>ConnectTime</span>
                  <!-- <img (click)="sort1('statusId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
                </p>
              </th>

              <th>
                <p class="d-inline-flex">
                  <span>DisconnectTime</span>
                  <!-- <img (click)="sort1('modifiedTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
                </p>
              </th>
              <th>
                <p class="d-inline-flex">
                  <span>TimeSpent</span>
                  <!-- <img (click)="sort1('modifiedTime')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
                </p>
              </th>

              <!-- <th>status</th> -->
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let task of openViewPopupData; let i = index">
              <td>
                <p>{{ task.ip_address }}</p>
              </td>

              <td>
                <p>{{ task.mac_address }}</p>
              </td>

              <td>
                <p>{{ task.connect_time}}</p>
              </td>

              <td>
                <p>{{ task.disconnected_time }}</p>
              </td>
              <td>
                <p>{{ task.time_spent }}</p>
              </td>

              <!-- <td>
                <p>{{ task.statusId == 1 ? 'Open' : task.statusId == 2 ? 'In-Progress' : task.statusId == 3 ? 'Closed' : task.statusId == 4 ? 'Rejected' : '' }}</p>
              </td> -->
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="d-flex justify-content-end"  >
      <button class="dialog-close-btn" mat-dialog-close>Close</button>
    </div>
  </ng-template>

  <div *ngIf="showWifiDetail">
    <app-wifi-detail (newItemEvent)="closenow('wifi')"></app-wifi-detail>
  </div>

