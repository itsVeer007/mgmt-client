<div class="container-fluid users" id="top">

  <!-- header -->
  <div class="users-header row">

    <!-- count -->
    <div class="col-lg-6">
      <p>Vendors - <span>{{ inventoryTable.length }}</span></p>
      <div class="row">
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-green"></div>
          <div class="mx-2">
            <div class="status">Active</div>
            <div class="count">{{ inStock.length }}</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-red"></div>
          <div class="mx-2">
            <div class="status">Inactive</div>
            <div class="count">{{ installed.length }}</div>
          </div>
        </div>
        <!-- <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-red"></div>
          <div class="mx-2">
            <div class="status">Scrap</div>
            <div class="count">{{ scrap.length }}</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-greay"></div>
          <div class="mx-2">
            <div class="status">Reuse</div>
            <div class="count">{{ redyToUse.length }}</div>
          </div>
        </div> -->
      </div>
    </div>
    <!-- /count -->

    <div class="col-lg-2 text-end inve-add" style="position: relative">
      <a class="pointer" (click)="show('inventory')">
        <img src="assets/icons/add.svg" alt="" />
      </a>
      <!-- <a class="pointer">
        <img src="assets/icons/sites-img.svg" alt=""
          style="border-radius: 24px; box-shadow: 7px 7px 7px 0px #f3f3f3; margin-top: -9px;">
      </a> -->
    </div>

  </div>
  <!-- /header -->

  <!-- form -->
  <div class="search-form">
      <!-- <div class="col-lg-2 col-sm-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Product Brand</mat-label>
          <mat-select (focus)="removeDuplicates()" [(ngModel)]="prBrand">
            <mat-option value="">All</mat-option>
            <mat-option *ngFor="let item of brandNames" [value]="item.productBrand">{{ item.productBrand }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-lg-2 col-sm-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Product Category</mat-label>
          <mat-select (focus)="removeDuplicates()" [(ngModel)]="prCat">
            <mat-option value="">All</mat-option>
            <mat-option *ngFor="let item of categoryTypes" [value]="item.productCategory">{{ item.productCategory }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-lg-2 col-sm-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Status</mat-label>
          <mat-select (focus)="removeDuplicates()" [(ngModel)]="sta">
            <mat-option value="">All</mat-option>
            <mat-option *ngFor="let item of statusVal" [value]="item.status">{{ item.status }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div> -->

      <div class="col-lg-2 col-sm-12">
        <mat-form-field class="example-form-field" appearance="outline" class="w-100">
          <mat-label>Search</mat-label>
          <input matInput type="text"  [(ngModel)]="searchText">
          <button matSuffix mat-icon-button>
            <mat-icon>search</mat-icon>
          </button>
        </mat-form-field>
      </div>

      <!-- <div class="filter-search-btn col-lg-2 col-sm-12">
        <button (click)="applyFilter()">Submit</button>
      </div> -->

      <div class="table-icons">
        <div class="lists" *ngIf="showIconView" style="margin-right: 60px; margin-top: -40px;">View</div>
        <div class="lists" *ngIf="showIconEdit" style="margin-right: 30px; margin-top: -40px;">Edit</div>
        <div class="lists" *ngIf="showIconDelete" style="margin-right: -5px; margin-top: -40px;">Delete</div>

        <a class="mx-2" (click)="viewBySelectedOne()"><img src="assets/icons/view.svg" (mouseenter)="showIconView = true" (mouseleave)="showIconView = false"></a>
        <a class="mx-2" (click)="editBySelectedOne()"><img src="assets/icons/edit.svg" (mouseenter)="showIconEdit = true" (mouseleave)="showIconEdit = false"></a>
        <a class="mx-2" (click)="deleteSelected()"><img src="assets/icons/delete.svg" (mouseenter)="showIconDelete = true" (mouseleave)="showIconDelete = false"></a>
      </div>
  </div>
  <!-- /form -->

  <!-- table starts -->
  <div class="table-resp">
    <table class="table table-hover" id="mytable">
      <thead>
        <tr class="form1">
          <th>
            <input type="checkbox" class="form-check-input" [(ngModel)]="selectedAll" (change)="selectAll()"
              id="allcheck" style="
                background-color: #00000000;
                border-color: #fff;
                margin-left: 10px;
              " />
          </th>

          <th>
            <span>Vendor Id</span>
            <img (click)="sort('id')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
          </th>

          <th>
            <span>Vendor Name</span>
            <img (click)="sort('name')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
          </th>

          <th>
            <span>Proprietor Name</span>
            <!-- <img (click)="sort('productName')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
          </th>

          <th>
            <span>Email</span>
            <!-- <img (click)="sort('productBrand')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
          </th>

          <th>
            <span>Mobile</span>
            <!-- <img (click)="sort('productCategory')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
          </th>

          <th>
            <span>Address</span>
            <!-- <img (click)="sort('productCategory')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px"> -->
          </th>

          <th>
            <span>Status</span>
            <img (click)="sort('statusId')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
          </th>

          <th>
            <span>Remarks</span>
            <img (click)="sort('remarks')" class="pointer ms-1" src="assets/icons/sorticon.svg" width="15px">
          </th>

          <th></th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let cust of newInventoryTable | search : searchText; let i = index" (dblclick)="openViewPopup(cust)">
          <td>
            <input type="checkbox" name="foo" class="form-check-input" [(ngModel)]="cust.selected" (change)="
                checkIfAllSelected();
                deleteMultiRecords(cust, i, $event);
                ViewByCheckbox(cust, i, $event);
                EditByCheckbox(cust, i, $event)
              " id="singleCheck" />
          </td>
          <!-- <td><input type="checkbox" class="form-check-input" [checked]="masterSelected" /></td> -->
          <td>
            <p>{{ cust.id }}</p>
          </td>
          <td>
            <p>{{ cust.name }}</p>
          </td>
          <td>
            <p (click)="proprietorView(cust)" class="pointer">View</p>

            <ng-template #proprietorDialog>
              <p style="color: #ABABAB;">Proprietor Name</p>
              <div>
                  <p><span *ngIf="proprietorId.proprietorName1">({{i+1}})</span> {{proprietorId.proprietorName1}}</p>
                  <p><span *ngIf="proprietorId.proprietorName2">({{i+2}})</span> {{proprietorId.proprietorName2}}</p>
                  <p><span *ngIf="proprietorId.proprietorName3">({{i+3}})</span> {{proprietorId.proprietorName3}}</p>
              </div>
            </ng-template>
          </td>
          <td>
            <p (click)="emailView(cust)" class="pointer">View</p>

            <ng-template #emailDialog>
              <p style="color: #ABABAB;">Email</p>
              <div>
                  <p><span *ngIf="emailId.emailId1">({{i+1}})</span> {{emailId.emailId1}}</p>
                  <p><span *ngIf="emailId.emailId2">({{i+2}})</span> {{emailId.emailId2}}</p>
                  <p><span *ngIf="emailId.emailId3">({{i+3}})</span> {{emailId.emailId3}}</p>
              </div>
            </ng-template>
          </td>
          <td>
            <p (click)="mobileView(cust)" class="pointer">View</p>

            <ng-template #mobileDialog>
              <p style="color: #ABABAB;">Mobile</p>
              <div>
                  <p><span *ngIf="mobileId.mobileNumber1">({{i+1}})</span> {{mobileId.mobileNumber1}}</p>
                  <p><span *ngIf="mobileId.mobileNumber2">({{i+2}})</span> {{mobileId.mobileNumber2}}</p>
                  <p><span *ngIf="mobileId.mobileNumber3">({{i+3}})</span> {{mobileId.mobileNumber3}}</p>
              </div>
            </ng-template>
          </td>
          <td>
            <p (click)="addressView(cust)" class="pointer">View</p>

            <ng-template #addressDialog>
              <p style="color: #ABABAB;">Address</p>
              <div>
                  <p>{{addressId.addressLine1}}, {{addressId.city}}, {{addressId.state}}, {{addressId.postCode}}</p>
                  <p>{{addressId.addressLine2}}, {{addressId.city}}, {{addressId.state}}, {{addressId.postCode}}</p>
              </div>
            </ng-template>
          </td>
          <td>
            <p [style.color]="cust.statusId == 1 ? '#00A44C' : '#fa500f'">
              {{ cust.statusId == 1 ? 'Active' : 'Inactive' }}
            </p>
          </td>
          <!-- <td> -->
            <!-- <p>{{ cust.details }}</p> -->
            <!-- <a class="pointer" style="color: #084982;" (click)="addressView($event,i)">{{cust.details}}</a>
            <div style="display: none;"
                class="plus-img" id="address{{i}}">
                <p class="p-2" style="color: #ABABAB; text-align: left;">ADDRESS</p>
                <div style="color: #000; text-align: left; padding: 10px;">
                    <p>Pathur Road, Tadepally</p>
                    <p>Guntur - 522501</p>
                    <p>Andhra Pradesh, India</p>
                </div>
            </div> -->
          <!-- </td> -->
          <!-- <td>
            <a class="pointer" (click)="show('inventory')">
              <img src="assets/icons/add-svg.svg" width="25" height="25" />
            </a>
          </td> -->
          <td>
            <p >
              {{ cust.remarks }}
            </p>
          </td>
          <td style="position: relative;">
            <a (click)="closeDot($event, i)" class="pointer">
              <img src="assets/icons/dotlist.svg" width="30" height="12" />
            </a>
            <div class="plus-img1" id="plus-img{{i}}" style="display: none">
              <div class="lists" *ngIf="showIconView1" style="margin-left: 5px; margin-top: -20px">
                View
              </div>
              <div class="lists" *ngIf="showIconEdit1" style="margin-left: 38px; margin-top: -20px">
                Edit
              </div>
              <div class="lists" *ngIf="showIconDelete1" style="margin-left: 63px; margin-top: -20px">
                Delete
              </div>

              <a class="mx-2" (click)="openViewPopup(cust)">
                <img src="assets/icons/view.svg" (mouseenter)="showIconView1 = true" (mouseleave)="showIconView1 = false" />
              </a>
              <a class="mx-2" (click)="openEditPopup(cust)">
                <img src="assets/icons/edit.svg" (mouseenter)="showIconEdit1 = true" (mouseleave)="showIconEdit1 = false" />
              </a>
              <!-- <a class="mx-2" value="Delete" (click)="deleteRow1(cust, i)"><img src="assets/icons/delete.svg" /></a> -->
              <a class="mx-2" value="Delete" (click)="openDeletePopup(cust)">
                <img src="assets/icons/delete.svg" (mouseenter)="showIconDelete1 = true" (mouseleave)="showIconDelete1 = false" />
              </a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- table ends -->


<!-- view Popup -->
<div class="edit-dialog">
  <ng-template #viewInventoryDialog>
    <div *ngIf="currentItem">
      <mat-list>
        <div class="row">
          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Vendor Id: </span>{{ currentItem.id }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Vendor Name: </span>{{ currentItem?.name }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Proprietor Name1: </span>{{ currentItem.proprietorName1 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Proprietor Name2: </span>{{ currentItem.proprietorName2 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Proprietor Name3: </span>{{ currentItem.proprietorName3 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Email Id1: </span>{{ currentItem.emailId1 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Email Id2: </span>{{ currentItem.emailId2 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Email Id3: </span>{{ currentItem.emailId3 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Mobile Number1: </span>{{ currentItem.mobileNumber1 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Mobile Number2: </span>{{ currentItem.mobileNumber2 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Mobile Number3: </span>{{ currentItem.mobileNumber3 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Status: </span>{{ currentItem.statusId}}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Service StartDate: </span>{{ currentItem.serviceStartDate }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Service EndDate: </span>{{ currentItem.serviceEndDate }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Created By: </span>{{ currentItem.createdBy }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Modified By: </span>{{ currentItem.modifiedBy }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Created Time: </span>{{ currentItem.createdTime }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Modified Time: </span>{{ currentItem.modifiedTime }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Address Line1: </span>{{ currentItem.addressLine1 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Address Line2: </span>{{ currentItem.addressLine2 }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">State: </span>{{ currentItem.state }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Post Code: </span>{{ currentItem.postCode }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">City: </span>{{ currentItem.city }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>

          <div class="col-lg-6">
            <mat-list-item>
              <span style="width: 130px; color: #ABABAB;">Remarks: </span>{{ currentItem.remarks }}
            </mat-list-item>
            <mat-divider></mat-divider>
          </div>
        </div>
      </mat-list>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
  </ng-template>
</div>
<!-- view Popup -->

<!-- edit Popup -->
<ng-template #editInventoryDialog>
  <div class="row" *ngIf="currentItem">
    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Vendor Id</mat-label>
        <input matInput [(ngModel)]="currentItem.id" disabled>
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Vendor Name</mat-label>
        <input matInput [(ngModel)]="currentItem.name">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Proprietor Name1</mat-label>
        <input matInput [(ngModel)]="currentItem.proprietorName1">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Proprietor Name2</mat-label>
        <input matInput [(ngModel)]="currentItem.proprietorName2">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Proprietor Name3</mat-label>
        <input matInput [(ngModel)]="currentItem.proprietorName3">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Email1</mat-label>
        <input matInput [(ngModel)]="currentItem.emailId1">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Email2</mat-label>
        <input matInput [(ngModel)]="currentItem.emailId2">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Email3</mat-label>
        <input matInput [(ngModel)]="currentItem.emailId3">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Mobile Number1</mat-label>
        <input matInput [(ngModel)]="currentItem.mobileNumber1">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Mobile Number2</mat-label>
        <input matInput [(ngModel)]="currentItem.mobileNumber2">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Mobile Number3</mat-label>
        <input matInput [(ngModel)]="currentItem.mobileNumber3">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="currentItem.statusId">
          <mat-option *ngFor="let item of vendorStatus" [value]="item.keyId">{{item.value}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Address Line1</mat-label>
        <input matInput [(ngModel)]="currentItem.addressLine1">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Address Line2</mat-label>
        <input matInput [(ngModel)]="currentItem.addressLine2">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>state</mat-label>
        <input matInput [(ngModel)]="currentItem.state">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>postCode</mat-label>
        <input matInput [(ngModel)]="currentItem.postCode">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>city</mat-label>
        <input matInput [(ngModel)]="currentItem.city">
      </mat-form-field>
    </div>

    <div class="col-lg-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>remarks</mat-label>
        <input matInput [(ngModel)]="currentItem.remarks">
      </mat-form-field>
    </div>
  </div>

  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="editInventory()">Update</button>
    </div>
  </div>
</ng-template>
<!-- edit Popup -->

<!-- Delete Popup -->
<ng-template #deleteInventoryDialog>
  <div class="d-flex justify-content-between">
    <p>Delete Row</p>
  </div>
  <div class="text-center">Do you want to delete this item?</div>

  <div class="d-flex align-items-center justify-content-end">
    <div mat-dialog-actions class="me-2">
      <button mat-stroked-button style="color: #D34124; border: 1px solid #D34124; padding: 0;" mat-dialog-close>Close</button>
    </div>
    <div mat-dialog-actions>
      <button mat-stroked-button style="color: #084982; border: 1px solid #084982; padding: 0;" mat-dialog-close (click)="deleteInventory()">OK</button>
    </div>
  </div>
</ng-template>
<!-- /Delete Popup -->


<!-- Detai View Popup -->
<!-- <div *ngIf="showDetail" style="position: absolute; top: 150px; left: 500px;">
  <mat-list class="bg-info">
    <mat-list-item>Item 1</mat-list-item>
    <mat-divider></mat-divider>
    <mat-list-item>Item 2</mat-list-item>
    <mat-divider></mat-divider>
    <mat-list-item>Item 3</mat-list-item>
  </mat-list>
</div> -->
<!-- /Detai View Popup -->


<div style="position: fixed; top: 70px; right: 0; z-index: 99; width: 100%;" *ngIf="showInventory">
  <app-add-new-vendor [show]="showInventory" (newItemEvent)="closenow($event, 'inventory')"></app-add-new-vendor>
</div>
