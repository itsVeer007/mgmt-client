<div class="row formModal">
  <div class="col-lg-6 col-md-6"></div>
  <div class="col-lg-6 col-md-6 add-form" id="camera" @inOutPaneAnimation>

    <div class="d-flex flex-row justify-content-between">
      <div class="d-flex">
        <a class="close-main pointer" (click)="closeAddCamera()"><img src="assets/icons/close_form.svg" /></a>
        <span class="form-heading">create new</span>
      </div>

      <!-- <div class="mx-5 my-4 site-icons">
        <a (click)="openAnotherForm('showAddBusinessVertical')"><img src="assets/icons/ver-icon-form.svg" class="mx-2 my-4" /></a>
              <a (click)="openAnotherForm('showAddCustomer')"><img src="assets/icons/cust-icon-form.svg" class="mx-2 my-4" /></a>
              <a (click)="openAnotherForm('showAddSite')"><img src="assets/icons/site-icon-form.svg" class="mx-2 my-4" /></a>
              <a (click)="openAnotherForm('showAddCamera')" class="boxshadow"><img src="assets/icons/cam-icon-form.svg" class="mx-2 my-4 changesvgcolor" /></a>
              <a (click)="openAnotherForm('analytics')"><img src="assets/icons/analy-icon-form.svg" class="mx-2 my-4" /></a>
              <a (click)="openAnotherForm('showAddUser')"><img src="assets/icons/user-icon-form.svg" class="mx-2 my-4" /></a>
      </div> -->
    </div>

    <!-- Form -->
    <div>
      <form autocomplete="off" [formGroup]="addAssetForm">
        <div class="row" *ngFor="let item of ticketBody.tasks; let i = index">

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Priority</mat-label>
              <mat-select formControlName="priority" [(ngModel)]="ticketBody.ticket.priorityId">
                <mat-option *ngFor="let item of ticketPriority" [value]="item.keyId">{{ item.value }}</mat-option>
              </mat-select>
              <mat-error class="mt-1">Priority is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Ticket Type</mat-label>
              <mat-select formControlName="ticketType" [(ngModel)]="ticketBody.ticket.ticketTypeId">
                <mat-option *ngFor="let item of ticketType" [value]="item.keyId">{{ item.value }}</mat-option>
              </mat-select>
              <mat-error class="mt-1">Ticket Type is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Source of Request</mat-label>
              <mat-select formControlName="sourceOfRequest" [(ngModel)]="ticketBody.ticket.sourceOfRequestId">
                <mat-option *ngFor="let item of sourceOfRequest" [value]="item.keyId">{{ item.value }}</mat-option>
              </mat-select>
              <mat-error class="mt-1">Source is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Reqst By</mat-label>
              <input matInput formControlName="requestedBy" [(ngModel)]="ticketBody.ticket.requestedBy">
              <mat-error class="mt-1">Reqst By is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Site</mat-label>
              <mat-select formControlName="siteId" [(ngModel)]="ticketBody.ticket.siteId">
                <mat-option *ngFor="let item of siteIds" [value]="item.siteid">{{ item.siteid }} - {{ item.siteShortName }}</mat-option>
              </mat-select>
              <mat-error class="mt-1">Source is required</mat-error>
            </mat-form-field>
          </div>


          <!-- tasks -->
          <div class="d-flex justify-content-start align-items-center my-2">
            <h2 class="m-0">Tasks</h2>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Task Category</mat-label>
              <mat-select formControlName="categoryId" [(ngModel)]="ticketBody.tasks[i].categoryId">
                <mat-option *ngFor="let item of ticketCategory" [value]="item.keyId">{{ item.value }}</mat-option>
              </mat-select>
              <mat-error class="mt-1">Category is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Sub Category</mat-label>
              <mat-select formControlName="subCategoryId" [(ngModel)]="ticketBody.tasks[i].subCategoryId">
                <mat-option *ngFor="let item of ticketSubCategory" [value]="item.keyId">{{ item.value }}</mat-option>
              </mat-select>
              <mat-error class="mt-1">Sub Category is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Description</mat-label>
              <input matInput formControlName="description" [(ngModel)]="ticketBody.tasks[i].description">
              <mat-error class="mt-1">Description is required</mat-error>
            </mat-form-field>
          </div>

          <!-- <div class="col-lg-6 col-md-6">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Remarks</mat-label>
              <input matInput formControlName="remarks" [(ngModel)]="ticketBody.tasks[i].remarks">
              <mat-error class="mt-1">Remarks is required</mat-error>
            </mat-form-field>
          </div> -->

          <div class="col-lg-6 col-md-6">
            <button mat-stroked-button class="mt-2" style="color: #084982" (click)="onTaskAdd(item)">Add</button>
          </div>

          <div class="col-lg-12 col-md-12">
            <div *ngFor="let item of tasks" class="d-flex justify-content-between">
              <p>category: {{item.categoryId}}</p>
              <p>subCategoryId: {{item.subCategoryId}}</p>
              <p>description: {{item.description}}</p>
            </div>
          </div>
          <!-- /tasks -->

          <div class="text-center my-3">
            <button class="btn add-btn" (click)="addNewAsset()">ADD</button>
          </div>
        </div>
      </form>
    </div>
    <!-- /Form -->

  </div>
</div>
