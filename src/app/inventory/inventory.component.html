<!-- <app-loader *ngIf="showLoader"></app-loader> -->
<div class="container-fluid users" id="top">

  <!-- header -->
  <div class="users-header row">

    <!-- count -->
    <div class="col-lg-6">
      <p>Total Inventory - <span>100</span></p>
      <div class="row">
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-yellow"></div>
          <div class="mx-2">
            <div class="status">In-Stock</div>
            <div class="count">20</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-green"></div>
          <div class="mx-2">
            <div class="status">Installed</div>
            <div class="count">40</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-red"></div>
          <div class="mx-2">
            <div class="status">Scrap</div>
            <div class="count">5</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-greay"></div>
          <div class="mx-2">
            <div class="status">Reuse</div>
            <div class="count">5</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-orange"></div>
          <div class="mx-2">
            <div class="status">Returned</div>
            <div class="count">50</div>
          </div>
        </div>
        <div class="col-lg-2 d-flex justify-content-start">
          <div class="vl-violet"></div>
          <div class="mx-2">
            <div class="status">Removed</div>
            <div class="count">20</div>
          </div>
        </div>
      </div>
    </div>
    <!-- /count -->

    <!-- stock total -->
    <div class="mt-2 col-lg-4">
      <div class="card bg-light" style="width: 18rem;">
        <div class="d-flex justify-content-between m-2">
          <img class="pointer" src="assets/icons/Union 18@2x.png" alt="" width="15px" height="15px">
          <span class="card-title m-0 text-center" style="font-size: 18px; font-weight: 700;">In-Stock Total</span>
          <img class="pointer" src="assets/icons/Union 17@2x.png" alt="" width="15px" height="15px">
        </div>

        <div class="card-body d-flex justify-content-evenly">
          <div class="text-center">
            <h6 class="card-subtitle m-0 text-muted">Cost</h6>
            <p class="m-0">2000</p>
          </div>
          <div class="text-center">
            <h6 class="card-subtitle m-0 text-muted">Price</h6>
            <p class="m-0">2000</p>
          </div>
        </div>
      </div>
    </div>
    <!-- /stock total -->

    <div class="col-lg-2 text-end inve-add" style="position: relative">
      <a class="pointer" (click)="show('inventory')">
        <img src="assets/icons/add.svg" alt="" />
      </a>
      <a class="pointer">
        <img src="assets/icons/sites-img.svg" alt=""
          style="border-radius: 24px; box-shadow: 7px 7px 7px 0px #f3f3f3; margin-top: -9px;">
      </a>
    </div>

  </div>
  <!-- /header -->

  <!-- form -->
  <div class="search-form d-flex align-items-center justify-content-between my-2">
    <div class="row col-lg-10 col-md-10">
      <div class="col-lg-3 col-md-3 col-sm-12">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>All</mat-label>
          <mat-select>
            <!-- <mat-option (click)="sort('siteName')">Filter by A-Z</mat-option> -->
            <mat-option *ngFor="let cust of CustomerTable">{{ cust.contactPerson }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-lg-3 col-md-3 col-sm-12">
        <mat-form-field class="example-form-field" appearance="outline" class="w-100">
          <mat-label>Search</mat-label>
          <input matInput type="text"  [(ngModel)]="searchText">
          <button matSuffix mat-icon-button>
            <mat-icon>search</mat-icon>
          </button>
        </mat-form-field>
      </div>
    </div>

    <div class="col-lg-2 col-md-2 table-icons">
        <div class="lists" *ngIf="showIconView" style="margin-right: 60px; margin-top: -40px;">View</div>
        <div class="lists" *ngIf="showIconEdit" style="margin-right: 30px; margin-top: -40px;">Edit</div>
        <div class="lists" *ngIf="showIconDelete" style="margin-right: -5px; margin-top: -40px;">Delete</div>

        <a class="mx-2" (click)="viewBySelectedOne()"><img src="assets/icons/view.svg" (mouseenter)="showIconView = true" (mouseleave)="showIconView = false" /></a>
        <a class="mx-2" (click)="editBySelectedOne()"><img src="assets/icons/edit.svg" (mouseenter)="showIconEdit = true" (mouseleave)="showIconEdit = false" /></a>
        <a class="mx-2" (click)="deleteSelected()"><img src="assets/icons/delete.svg" (mouseenter)="showIconDelete = true" (mouseleave)="showIconDelete = false" /></a>
    </div>
  </div>
  <!-- /form -->

  <!-- table starts -->
  <div class="table-resp">
    <table class="table" id="mytable">
      <tbody>
        <tr class="form1">
          <th>
            <input type="checkbox" class="form-check-input" [(ngModel)]="selectedAll" (change)="selectAll()"
              id="allcheck" style="
                background-color: #00000000;
                border-color: #fff;
                margin-left: 10px;
              " />
          </th>
          <!-- <th><input type="checkbox" class="form-check-input" id="allchecked" (click)="allchecked($event)" style="background-color: #00000000; border-color:#fff;margin-left:10px;" /></th> -->
          <th (click)="sort('siteId')">Product ID</th>
          <th (click)="sort('customerName')">Product S.NO.</th>
          <th (click)="sort('custType')">Product Name</th>
          <th (click)="sort('address')">Product Brand</th>
          <th (click)="sort('contactNumber')">Product Category</th>
          <th (click)="sort('emailId')">Details</th>
          <!-- <th (click)="sort('contactPerson')">Site Name</th> -->
          <th (click)="sort('status')">Status</th>
          <th></th>
        </tr>

        <tr *ngFor="let cust of CustomerTable | search : searchText; let i = index">
          <td>
            <input type="checkbox" name="foo" class="form-check-input" [(ngModel)]="cust.selected" (change)="
                checkIfAllSelected();
                deleteMultiRecords(cust, i, $event);
                ViewByCheckbox(cust, i, $event);
                EditByCheckbox(cust, i, $event)
              " id="singleCheck" />
          </td>
          <!-- <td><input type="checkbox" class="form-check-input" [checked]="masterSelected" /></td> -->
          <td>
            <p>{{ cust.productID }}</p>
          </td>
          <td>
            <p>{{ cust.productSerialNo }}</p>
          </td>
          <td>
            <p>{{ cust.productName }}</p>
          </td>
          <td>
            <p>{{ cust.productBrand }}</p>
          </td>
          <td>
            <p>{{ cust.productCat }}</p>
          </td>
          <td>
            <a class="pointer" style="color: #084982;" (click)="addressView($event,i)">{{cust.productDetails}}</a>
            <div style="display: none;"
                class="plus-img" id="address{{i}}">
                <p class="p-2" style="color: #ABABAB; text-align: left;">ADDRESS</p>
                <div style="color: #000; text-align: left; padding: 10px;">
                    <p>Pathur Road, Tadepally</p>
                    <p>Guntur - 522501</p>
                    <p>Andhra Pradesh, India</p>
                </div>
            </div>
        </td>
          <!-- <td>
            <a class="pointer" (click)="show('inventory')">
              <img src="assets/icons/add-svg.svg" width="25" height="25" />
            </a>
          </td> -->
          <td>
            <p [style.color]="cust.status == 'Active' ? '#00A44C' : cust.status == 'Onhold' ? '#F5B400' : cust.status == 'Inactive' ? '#fa500f' : '#00A44C'">
              {{ cust.status }}
            </p>
          </td>
          <td>
            <a (click)="closeDot($event, i)" class="pointer">
              <img src="assets/icons/dotlist.svg" width="30" height="12" />
            </a>
            <div class="plus-img1" id="plus-img{{i}}" style="display: none">
              <div class="lists" *ngIf="showIconView1" style="margin-left: 5px; margin-top: -20px">
                View
              </div>
              <div class="lists" *ngIf="showIconEdit1" style="margin-left: 38px; margin-top: -20px">
                Edit
              </div>
              <div class="lists" *ngIf="showIconDelete1" style="margin-left: 63px; margin-top: -20px">
                Delete
              </div>

              <a class="mx-2" (click)="openViewPopup(cust, i)">
                <img src="assets/icons/view.svg" (mouseenter)="showIconView1 = true" (mouseleave)="showIconView1 = false" />
              </a>
              <a class="mx-2" (click)="openEditPopup(cust, i)">
                <img src="assets/icons/edit.svg" (mouseenter)="showIconEdit1 = true" (mouseleave)="showIconEdit1 = false" />
              </a>
              <!-- <a class="mx-2" value="Delete" (click)="deleteRow1(cust, i)"><img src="assets/icons/delete.svg" /></a> -->
              <a class="mx-2" value="Delete" (click)="openDeletePopup(cust, i)">
                <img src="assets/icons/delete.svg" (mouseenter)="showIconDelete1 = true" (mouseleave)="showIconDelete1 = false" />
              </a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<!-- table ends -->

<div class="modalitem max-center" [hidden]="deletePopup">
  <div class="card">
    <div class="card-header d-flex justify-content-between">
      <p>Delete Row</p>
      <img src="assets/icons/close_form.svg" width="40" height="40" (click)="closeDeletePopup()" />
    </div>
    <div class="card-body text-center">Do you want to delete this item?</div>
    <div class="card-footer">
      <button type="button" class="btn btn-primary mx-2" (click)="confirmDeleteRow()">
        OK
      </button>
      <button type="button" class="btn btn-danger" (click)="closeDeletePopup()">
        Close
      </button>
    </div>
  </div>
</div>

<div class="modalitem max-center" [hidden]="editPopup">
  <div class="card">
    <div class="card-header d-flex justify-content-between">
      <p>Edit</p>
      <img src="assets/icons/close_form.svg" width="40" height="40" (click)="closeEditPopup()" />
    </div>
    <div class="card-body text-center">
      <ul *ngIf="currentItem">
        <li>
          <h6 style="width: 110px">Site Id</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.siteId" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Customer Name</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.customerName" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Cust Type</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.custType" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Contact Number</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.contactNumber" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Email Id</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.emailId" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Contact Person</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.contactPerson" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Address</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.address" />
          </div>
        </li>
        <li>
          <h6 style="width: 110px">Status</h6>
          <div>
            <input type="text" class="form-control my-1" [(ngModel)]="currentItem.status" />
          </div>
        </li>
      </ul>
    </div>
    <div class="card-footer">
      <button type="button" class="btn btn-primary mx-2" (click)="confirmEditRow()">
        Update
      </button>
      <button type="button" class="btn btn-danger" (click)="closeEditPopup()">
        Close
      </button>
    </div>
  </div>
</div>

<!-- Delete Popup -->
<div class="modalitem max-center" [hidden]="viewPopup">
  <div class="card">
    <div class="card-header d-flex justify-content-between">
      <p>Customers</p>
      <img src="assets/icons/close_form.svg" width="40" height="40" (click)="closeViewPopup()" />
    </div>
    <div class="card-body text-center">
      <ul *ngIf="currentItem">
        <li>
          <h6 style="width: 110px">Site Id</h6>
          : {{ currentItem?.siteId }}
        </li>
        <li>
          <h6 style="width: 110px">Customer Name</h6>
          : {{ currentItem?.customerName }}
        </li>
        <li>
          <h6 style="width: 110px">Cust Type</h6>
          : {{ currentItem?.custType }}
        </li>
        <li>
          <h6 style="width: 110px">Contact Number</h6>
          : {{ currentItem?.contactNumber }}
        </li>
        <li>
          <h6 style="width: 110px">Email Id</h6>
          : {{ currentItem?.emailId }}
        </li>
        <li>
          <h6 style="width: 110px">Contact Person</h6>
          : {{ currentItem?.contactPerson }}
        </li>
        <li>
          <h6 style="width: 110px">Address</h6>
          : {{ currentItem?.address }}
        </li>
        <li>
          <h6 style="width: 110px">Status</h6>
          : {{ currentItem?.status }}
        </li>
      </ul>
    </div>
    <div class="card-footer">
      <!-- <button type="button" class="btn btn-primary" (click)="confirmViewRow()">OK</button> -->
      <button type="button" class="btn btn-danger" (click)="closeViewPopup()">
        Close
      </button>
    </div>
  </div>
</div>
<!-- /Delete Popup -->

<!-- Detai View Popup -->
<!-- <div *ngIf="showDetail" style="position: absolute; top: 150px; left: 500px;">
  <mat-list class="bg-info">
    <mat-list-item>Item 1</mat-list-item>
    <mat-divider></mat-divider>
    <mat-list-item>Item 2</mat-list-item>
    <mat-divider></mat-divider>
    <mat-list-item>Item 3</mat-list-item>
  </mat-list>
</div> -->
<!-- /Detai View Popup -->


<!-- <div style="position: fixed; top: 0" *ngIf="showSite">
  <app-add-additional-site [show]="showSite"
    (newItemEvent)="closenow($event, 'additionalSite')"></app-add-additional-site>
</div> -->

<div style="position: fixed; top: 70px; right: 0; z-index: 99; width: 100%;" *ngIf="showInventory">
  <app-add-new-inventory [show]="showInventory" (newItemEvent)="closenow($event, 'inventory')"></app-add-new-inventory>
</div>
